<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Finder</title>
</head>
<body>
    <h1>Movie Finder</h1>
    <input type="text" id="movieName" placeholder="Enter movie name">
    <button onclick="findMovies()">Search</button>
    <ul id="moviesList"></ul>

    <script>
        async function fetchMovies(movieName, apiKey, page = 1, movies = []) {
    const url = `http://www.omdbapi.com/?s=${movieName}&apikey=${apiKey}&page=${page}`;
    console.log(`Fetching page ${page} from URL: ${url}`);
    const response = await fetch(url);
    const data = await response.json();

    if (response.ok && data.Response === 'True') {
        movies.push(...data.Search);

        if (movies.length < parseInt(data.totalResults, 10)) {
            return fetchMovies(movieName, apiKey, page + 1, movies);
        } else {
            return movies;
        }
    } else {
        throw new Error(data.Error || 'Error fetching data');
    }
}

async function findMovies() {
    const movieName = document.getElementById('movieName').value;
    const apiKey = 'e0ef8a8c'; // Replace with your OMDB API key

    try {
        const movies = await fetchMovies(movieName, apiKey);
        displayMovies(movies);
    } catch (error) {
        console.error('Error fetching data:', error);
        document.getElementById('moviesList').innerHTML = `<li>Error fetching data: ${error.message}</li>`;
    }
}

function displayMovies(movies) {
    const moviesList = document.getElementById('moviesList');
    moviesList.innerHTML = '';

    if (movies.length > 0) {
        movies.forEach(movie => {
            console.log(movie);
            const listItem = document.createElement('li');
            listItem.textContent = `Title: ${movie.Title}, Year: ${movie.Year}, IMDb ID: ${movie.imdbID}`;
            moviesList.appendChild(listItem);
        });
    } else {
        moviesList.innerHTML = '<li>No movies found</li>';
    }
}

    </script>
</body>
</html>
